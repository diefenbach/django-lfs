{% extends "manage/manage_base.html" %}
{% load i18n static %}

{% block title %}{% trans "Manage Manufacturer" %}{% endblock %}
{% block section %}manage-manufacturer{% endblock %}
{% block help_link %}user/management/shop/manufacturers.html{% endblock %}

{% block left_slot %}
    <h2 class="navigation-title">{% trans "Manufacturers" %}</h2>
    <div class="navigation-body" id="selectable-manufacturers">
        {{ selectable_manufacturers_inline|safe }}
    </div>
{% endblock %}

{% block content %}
    <div class="site-actions mb-3" id="site-actions">
        <a class="btn btn-sm btn-primary"
           href="{% url 'lfs_manufacturer_add_manufacturer' %}?came_from={% url 'lfs_manage_manufacturer' manufacturer_id %}">
            <i class="bi bi-plus-circle-fill"></i>
            {% trans 'Add Manufacturer' %}
        </a>
        <a class="btn btn-sm btn-danger delete-link"
           dialog_message="{% trans 'Do you really want to delete this manufacturer?' %}"
           href="{% url 'lfs_manufacturer_delete_manufacturer' manufacturer_id %}">
            <i class="bi bi-trash"></i>
            {% trans 'Delete Manufacturer' %}
        </a>
        <a class="btn btn-sm btn-secondary preview popup-link"
           href="{{ manufacturer.get_absolute_url }}">
            <i class="bi bi-eye"></i>
            {% trans 'View Manufacturer' %}
        </a>
        <a class="btn btn-sm btn-secondary preview"
           href="{{ manufacturer.get_absolute_url }}">
            <i class="bi bi-box-arrow-up-right"></i>
            {% trans 'Goto Manufacturer' %}
        </a>
    </div>
    <div class="tabs">
        <ul class="nav nav-tabs" id="manufacturerTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="data-tab" data-bs-toggle="tab" data-bs-target="#data-content" type="button" role="tab" aria-controls="data-content" aria-selected="true">{% trans 'Data' %}</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="view-tab" data-bs-toggle="tab" data-bs-target="#view-content" type="button" role="tab" aria-controls="view-content" aria-selected="false">{% trans 'View' %}</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="seo-tab" data-bs-toggle="tab" data-bs-target="#seo-content" type="button" role="tab" aria-controls="seo-content" aria-selected="false">{% trans 'SEO' %}</button>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="products-tab" href="{% url 'lfs_manufacturer_load_products_tab' manufacturer.pk %}">{% trans 'Products' %}</a>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="products-tree-tab" data-bs-toggle="tab" data-bs-target="#products-tree-content" type="button" role="tab" aria-controls="products-tree-content" aria-selected="false">{% trans 'Products tree' %}</button>
            </li>
        </ul>
        <div class="tab-content mt-3 ms-3" id="manufacturerTabsContent">
            <div class="tab-pane show active" id="data-content" role="tabpanel" aria-labelledby="data-tab">
                {{ manufacturer_data_inline|safe }}
            </div>
            <div class="tab-pane" id="view-content" role="tabpanel" aria-labelledby="view-tab">
                {{ view|safe }}
            </div>
            <div class="tab-pane" id="seo-content" role="tabpanel" aria-labelledby="seo-tab">
                {{ seo|safe }}
            </div>
            <div class="tab-pane" id="products-tree-content" role="tabpanel" aria-labelledby="products-tree-tab">
                <h2>{% trans "Products" %}</h2>
                <ul class="manufacturer-tree">
                    {% for category in categories %}
                        <li class="category {{ category.klass }}"
                            data="{% url 'lfs_manufacturer_category_state' manufacturer_id category.id %}">
                            <input id="factory-category-input-{{ category.id }}"
                                   class="export-category-input"
                                   type="checkbox"
                                   data-url="{% url 'lfs_manufacturer_edit_category' manufacturer_id category.id %}"
                                   {% if category.checked %}checked="checked"{% endif %} />
                            <a class="category-ajax-link collapsed"
                               id="{{ category.id }}"
                               href="{% url 'lfs_manufacturer_inline' manufacturer_id category.id %}">
                                {{ category.name }}
                            </a>
                            <span class="category-state" id="category-state-{{ category.id }}">
                                {% if category.klass == "half" %}(1/2){% endif %}
                            </span>
                            <div id="sub-categories-{{ category.id }}"></div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
