{% load i18n static %}

<!-- Featured Products Form -->
<form id="featured-update-form"
      hx-post="{% url 'lfs_manage_update_featured' %}"
      hx-target="#featured-list"
      hx-select="#featured-list">
    {% csrf_token %}
    <input type="hidden" name="keep-filters" value="1">
    
    {% if featured %}
        <div class="table-responsive">
            <table class="table table-sm table-hover">
                <thead>
                    <tr>
                        <th class="checkbox">
                            <input type="checkbox" class="form-check-input select-all-featured" />
                        </th>
                        <th>{% trans 'Name' %}</th>
                        <th class="small">{% trans 'SKU' %}</th>
                        <th class="small">{% trans 'Position' %}</th>
                        <th class="small">{% trans 'Active' %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for ts in featured %}
                        <tr>
                            <td>
                                <input type="checkbox"
                                       name="product-{{ ts.id }}"
                                       class="form-check-input select-featured" />
                            </td>
                            <td>
                                <a href="{% url 'lfs_manage_product' ts.product.id %}" class="text-decoration-none">
                                    {% if ts.product.get_name %}
                                        {{ ts.product.get_name }}
                                    {% else %}
                                        ---
                                    {% endif %}
                                </a>
                            </td>
                            <td class="small text-muted">
                                {{ ts.product.get_sku }}
                            </td>
                            <td>
                                <input class="form-control form-control-sm"
                                       type="number"
                                       size="3"
                                       name="position-{{ ts.id }}"
                                       value="{{ ts.position }}"
                                       min="1" />
                            </td>
                            <td class="text-center">
                                {% if ts.product.is_active %}
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                {% else %}
                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div class="mt-3 d-flex gap-2">
            <button type="submit" 
                    name="save" 
                    class="btn btn-primary">
                <i class="bi bi-save me-1"></i>
                {% trans 'Save Featured' %}
            </button>
            
            <button type="submit" 
                    name="action" 
                    value="remove"
                    class="btn btn-danger"
                    onclick="return confirm('{% trans "Are you sure you want to remove the selected products from featured?" %}')">
                <i class="bi bi-trash me-1"></i>
                {% trans 'Remove from Featured' %}
            </button>
        </div>
    {% else %}
        <div class="text-center text-muted py-4">
            <i class="bi bi-star fs-1 d-block mb-3"></i>
            <p>{% trans "No featured products yet." %}</p>
            <p class="small">{% trans "Select products from the left panel and add them to featured products." %}</p>
        </div>
    {% endif %}
</form>

