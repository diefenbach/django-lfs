{% load i18n lfs_manage_tags crispy_forms_tags static %}

{# Products-Tab f√ºr Discount #}
<div class="mb-4">
    {# Search and filter for products #}
    <div class="row mb-3">
        <div class="col-md-4">
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
                    <input type="search" 
                           id="product-search"
                           class="form-control" 
                           placeholder="{% trans 'Search products...' %}" 
                           name="filter"
                           value="{{ filter }}"
                           hx-get="{{ request.path }}"
                           hx-swap="outerHTML"
                           hx-target="#add-products-form"
                           hx-select="#add-products-form"
                           hx-trigger="input changed delay:300ms, keyup[key=='Escape'] delay:100ms"
                           hx-include="[name='products_category_filter'], [name='products_manufacturer_filter']"
                           hx-push-url="true"
                           aria-label="{% trans 'Search products' %}">
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label for="category-filter" class="form-label">{% trans 'Category' %}</label>
                {% category_filter "refresh-on-change" "products_category_filter" %}
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label for="manufacturer-filter" class="form-label">{% trans 'Manufacturer' %}</label>
                {% manufacturer_filter "refresh-on-change" "products_manufacturer_filter" %}
            </div>
        </div>
    </div>

    <div class="row" id="products-tables">
        <div class="col-md-6">
            {% include "manage/discounts/tabs/_available_products.html" %}
        </div>
        <div class="col-md-6">
            {% include "manage/discounts/tabs/_assigned_products.html" %}
        </div>
    </div>
</div>

<script src="{% static 'lfs/manage/js/discounts.js' %}"></script>
